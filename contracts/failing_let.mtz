# Ensure that 'fail's in let-macros typecheck normally.

let {
  toCounter :: '[unit]
            -> '[(list operation, unit)]
  = { nil operation; pair;
    };

  toCaller :: '[nat, unit]
           -> '[(list operation, unit)]
  = { drop;
      nil operation;
      pair; fail;
    };
};
parameter (option nat);
storage unit;
code { unpair; if_some {toCaller} {toCounter};}